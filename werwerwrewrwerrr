@GET
@Path("/my-teams/{userId}")
public List<TeamSummary> getTeamsByUserId(@PathParam("userId") String userId) {
    // ล็อกดูว่าได้อะไรมา
    System.out.println("[my-teams] userId: " + userId);

    List<TeamEntity> teams = em.createQuery(
            // เลือกทีมผ่าน MemberEntity ที่ผูกกับ userEmail (ไม่ใช่ userID)
            "SELECT DISTINCT t FROM MemberEntity m " +
            "JOIN m.team t " +
            "LEFT JOIN FETCH t.memberEntities " +
            "WHERE LOWER(m.userEmail) = LOWER(:uid)",
            TeamEntity.class
    )
    .setParameter("uid", userId)
    .getResultList();

    return teams.stream().map(TeamResource::toSummary).toList();
}
